"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[654],{6654:function(e,n,i){i.r(n);var r,a,l,t,d,o,s,m=i(168),u=i(885),c=i(2791),h=i(4569),p=i.n(h),x=i(6960),v=i(4603),g=i(5705),b=i(8571),f=i(9562),j=i(6871),y=i(184);n.default=function(){var e,n=(0,c.useState)(null),i=(0,u.Z)(n,2),r=i[0],a=i[1],l=(0,c.useState)(!1),t=(0,u.Z)(l,2),d=t[0],o=t[1],s=(0,c.useState)(null),m=(0,u.Z)(s,2),h=m[0],v=m[1],S=(0,c.useState)(!1),k=(0,u.Z)(S,2),z=k[0],A=k[1],E=(0,j.s0)();(0,c.useEffect)((function(){p().get("/api/v1/me").then((function(e){a(e.data.user)}))}),[]);var N=(0,g.TA)({initialValues:{name:(null===r||void 0===r?void 0:r.name)||"",email:(null===r||void 0===r?void 0:r.email)||"",mobile:(null===r||void 0===r?void 0:r.mobile)||"",birthday:(null===r||void 0===r?void 0:r.birthday)||"",gender:(null===r||void 0===r?void 0:r.gender)||""},enableReinitialize:!0,validationSchema:b.Ry({name:b.Z_().min(3,"Name must have at least 3 characters.").required("Name is required."),email:b.Z_().email("Email must be a valid email.").required("Email is required."),mobile:b.Z_().max(11).required("Phone Number is required."),birthday:b.Z_().required("birthday  is required."),gender:b.Z_().required("Gender  is required.")}),onSubmit:function(e,n){n.resetForm;A(!0);var i=e.name,a=e.email,l=e.mobile,t=e.birthday,d=e.gender;function o(){var e,n,o,s,m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u={public_id:null!==(e=m[0])&&void 0!==e&&e.public_id?null===(n=m[0])||void 0===n?void 0:n.public_id:r.avatar.public_id,url:null!==(o=m[0])&&void 0!==o&&o.secure_url?null===(s=m[0])||void 0===s?void 0:s.secure_url:r.avatar.url};p().put("/api/v1/profile/update",{name:i,email:a,avatar:u,mobile:l,birthday:t,gender:d}).then((function(e){200===e.status&&e.data.success?((0,x.Am)("Profile update Sucessfull"),setTimeout((function(){E("/account/myprofile")}),3e3)):(0,x.Am)(e.data.message)})).catch((function(e){console.log(e.message)}))}console.log(e),h?(0,f.Z)(h).then((function(e){o(e)})):o()}});return(0,y.jsxs)(Z,{children:[(0,y.jsx)(C,{children:(0,y.jsx)("h2",{children:"Update Profile"})}),(0,y.jsxs)(w,{children:[(0,y.jsx)(P,{onClick:function(){return o(!0)},children:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("img",{src:null===r||void 0===r||null===(e=r.avatar)||void 0===e?void 0:e.url,alt:"profile_picture"}),d&&(0,y.jsxs)("div",{children:[(0,y.jsx)("input",{type:"file",name:"profilePic",onChange:function(e){return v(e.target.files[0])}}),N.touched.profilePic&&N.errors.profilePic&&(0,y.jsxs)("p",{children:[(0,y.jsx)("span",{children:"i"})," ",N.errors.profilePic," "]})]})]})}),(0,y.jsxs)(_,{onSubmit:N.handleSubmit,children:[(0,y.jsxs)(q,{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{htmlFor:"name",children:" Full Name"}),(0,y.jsx)("input",{type:"name",name:"name",onChange:N.handleChange,value:N.values.name}),N.touched.name&&N.errors.name&&(0,y.jsxs)("p",{children:[(0,y.jsx)("span",{children:"i"})," ",N.errors.name," "]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{htmlFor:"email",children:"Email"}),(0,y.jsx)("input",{type:"email",name:"email",onChange:N.handleChange,value:N.values.email}),N.touched.email&&N.errors.email&&(0,y.jsxs)("p",{children:[(0,y.jsx)("span",{children:"i"})," ",N.errors.email," "]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{htmlFor:"mobile",children:"Mobile"}),(0,y.jsx)("input",{type:"tel",name:"mobile",onChange:N.handleChange,value:N.values.mobile}),N.touched.mobile&&N.errors.mobile&&(0,y.jsxs)("p",{children:[(0,y.jsx)("span",{children:"i"})," ",N.errors.mobile," "]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{htmlFor:"birthday",children:"Birthday"}),(0,y.jsx)("input",{type:"date",name:"birthday",onChange:N.handleChange,value:N.values.birthday}),N.touched.birthday&&N.errors.birthday&&(0,y.jsxs)("p",{children:[(0,y.jsx)("span",{children:"i"})," ",N.errors.birthday]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{htmlFor:"gender",children:"Gender :"}),(0,y.jsxs)("select",{onChange:N.handleChange,value:N.values.gender,name:"gender",children:[(0,y.jsx)("option",{value:"",children:"Choose"}),(0,y.jsx)("option",{value:"male",children:"Male"}),(0,y.jsx)("option",{value:"female",children:"Female"})]}),N.touched.gender&&N.errors.gender&&(0,y.jsxs)("p",{children:[(0,y.jsx)("span",{children:"i"})," ",N.errors.gender," "]})]})]}),(0,y.jsx)(F,{children:(0,y.jsx)("input",{onClick:N.handleSubmit,type:"submit",value:"Update Profile",disabled:z})})]})]})]})};var Z=v.ZP.div(r||(r=(0,m.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 2rem;\n  width: 100%;\n  max-width: 800px;\n  margin-bottom: 3rem;\n"]))),w=v.ZP.div(a||(a=(0,m.Z)(["\n  border-radius: 0.5rem;\n  box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n  padding: 5rem;\n  margin: 2rem ;\n  width: 90%;\n  @media screen and (max-width: 768px) {\n    margin: 0 5rem;\n  \n  }\n  @media screen and (max-width: 450px) {\n  \n    padding: 2rem;\n  }\n"]))),C=v.ZP.div(l||(l=(0,m.Z)(["\n  margin-top: 2rem;\n\n   width: 90%;\n\n  h2 {\n    text-align: left;\n  }\n  @media screen and (max-width: 768px) {\n    h2 {\n    text-align: center;\n  }\n  }\n"]))),P=v.ZP.div(t||(t=(0,m.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2rem;\n  margin-bottom: 2rem;\n  &:hover {\n    cursor: pointer;\n  }\n  img {\n    width: 15rem;\n    height: 15rem;\n    border-radius: 50%;\n    object-fit: cover;\n  }\n"]))),_=v.ZP.form(d||(d=(0,m.Z)(["\n  width: 100%;\n  height: 100%;\n"]))),q=v.ZP.div(o||(o=(0,m.Z)(["\n  div {\n    margin: 1rem 0;\n    & label {\n      font-size: 1.3rem;\n      color: var(--text-secondary);\n    }\n    & input {\n      width: 100%;\n      height: 3.5rem;\n      padding: 0 1rem;\n      border: none;\n      outline: none;\n      &:focus {\n        box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px,\n          rgba(0, 0, 0, 0.3) 0px 1px 3px -1px;\n      }\n      &::placeholder {\n        padding-left: 0.5rem;\n        font-size: 1.3rem;\n      }\n    }\n    p {\n      font-size: 1.1rem;\n      span {\n        font-style: italic;\n        color: tomato;\n        margin: 1.3rem 0.4rem 0 0;\n        font-weight: 700;\n        font-size: 1.3rem;\n      }\n    }\n  }\n"]))),F=v.ZP.div(s||(s=(0,m.Z)(["\n  & input {\n    font-size: 1.3rem;\n    border: none;\n    background-color: var(--bg-primary);\n    padding: 1rem 2rem;\n    border-radius: 5px;\n    margin-bottom: 1rem;\n    cursor: pointer;\n    transition: all 0.5s;\n    &:hover {\n      color: #fff;\n      background-color: #ff6347f6;\n    }\n  }\n"])))},9562:function(e,n,i){var r=i(4569),a=i.n(r);n.Z=function(e){return new Promise((function(n,i){var r=new FileReader;r.readAsDataURL(e),r.onload=function(r){var l=e.name.split(".")[0];a().post("/api/v1/media/uploadImage",{images:[{base64:r.target.result,options:{public_id:l,tags:[l]}}]}).then((function(e){n(e.data.urls)})).catch((function(e){i(e.message)}))}}))}}}]);
//# sourceMappingURL=654.29da96bb.chunk.js.map